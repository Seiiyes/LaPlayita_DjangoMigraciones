# Generated by Django 5.2.7 on 2025-12-15 00:25

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('inventory', '0003_tasaiva'),
    ]

    operations = [
        migrations.CreateModel(
            name='AjusteInventario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad_sistema', models.IntegerField(help_text='Stock según sistema')),
                ('cantidad_fisica', models.IntegerField(help_text='Stock según conteo físico')),
                ('diferencia', models.IntegerField(help_text='cantidad_fisica - cantidad_sistema')),
                ('motivo', models.CharField(choices=[('conteo_fisico', 'Conteo Físico'), ('merma', 'Merma'), ('robo', 'Robo'), ('daño', 'Daño'), ('error_sistema', 'Error de Sistema'), ('otro', 'Otro')], max_length=20)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('costo_ajuste', models.DecimalField(decimal_places=2, default=0.0, help_text='Impacto económico', max_digits=12)),
                ('fecha_ajuste', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('aprobado', 'Aprobado'), ('rechazado', 'Rechazado'), ('aplicado', 'Aplicado')], default='pendiente', max_length=20)),
                ('observaciones', models.TextField(blank=True, null=True)),
            ],
            options={
                'db_table': 'ajuste_inventario',
                'ordering': ['-fecha_ajuste'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='AlertaInventario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_alerta', models.CharField(choices=[('stock_bajo', 'Stock Bajo'), ('stock_critico', 'Stock Crítico'), ('sin_stock', 'Sin Stock'), ('sobre_stock', 'Sobre Stock'), ('proximo_vencer', 'Próximo a Vencer'), ('vencido', 'Vencido'), ('rotacion_baja', 'Rotación Baja')], max_length=20)),
                ('prioridad', models.CharField(choices=[('baja', 'Baja'), ('media', 'Media'), ('alta', 'Alta'), ('critica', 'Crítica')], default='media', max_length=10)),
                ('titulo', models.CharField(max_length=255)),
                ('mensaje', models.TextField()),
                ('valor_actual', models.CharField(blank=True, max_length=100, null=True)),
                ('valor_esperado', models.CharField(blank=True, max_length=100, null=True)),
                ('fecha_generacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_vencimiento', models.DateTimeField(blank=True, help_text='Cuándo expira la alerta', null=True)),
                ('estado', models.CharField(choices=[('activa', 'Activa'), ('resuelta', 'Resuelta'), ('ignorada', 'Ignorada'), ('expirada', 'Expirada')], default='activa', max_length=20)),
                ('fecha_resolucion', models.DateTimeField(blank=True, null=True)),
                ('notas_resolucion', models.TextField(blank=True, null=True)),
            ],
            options={
                'db_table': 'alerta_inventario',
                'ordering': ['-fecha_generacion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ConfiguracionAlerta',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_alerta', models.CharField(choices=[('stock_bajo', 'Stock Bajo'), ('stock_critico', 'Stock Crítico'), ('sobre_stock', 'Sobre Stock'), ('proximo_vencer', 'Próximo a Vencer'), ('rotacion_baja', 'Rotación Baja')], max_length=20, unique=True)),
                ('activo', models.BooleanField(default=True)),
                ('umbral_valor', models.DecimalField(blank=True, decimal_places=2, help_text='Valor numérico del umbral', max_digits=10, null=True)),
                ('umbral_porcentaje', models.DecimalField(blank=True, decimal_places=2, help_text='Porcentaje del umbral', max_digits=5, null=True)),
                ('dias_anticipacion', models.IntegerField(blank=True, help_text='Días de anticipación para alertas de vencimiento', null=True)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('notificar_email', models.BooleanField(default=False)),
                ('notificar_dashboard', models.BooleanField(default=True)),
                ('usuarios_notificar', models.JSONField(blank=True, help_text='Array de IDs de usuarios a notificar', null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
                ('fecha_modificacion', models.DateTimeField(auto_now=True, null=True)),
            ],
            options={
                'db_table': 'configuracion_alerta',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ConteoFisico',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_conteo', models.CharField(help_text='Ej: CF-2025-001', max_length=50, unique=True)),
                ('tipo_conteo', models.CharField(choices=[('completo', 'Completo'), ('parcial', 'Parcial'), ('ciclico', 'Cíclico'), ('sorpresa', 'Sorpresa')], default='ciclico', max_length=20)),
                ('fecha_programada', models.DateField()),
                ('fecha_inicio', models.DateTimeField(blank=True, null=True)),
                ('fecha_finalizacion', models.DateTimeField(blank=True, null=True)),
                ('estado', models.CharField(choices=[('programado', 'Programado'), ('en_proceso', 'En Proceso'), ('completado', 'Completado'), ('cancelado', 'Cancelado'), ('ajustado', 'Ajustado')], default='programado', max_length=20)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('total_productos', models.IntegerField(default=0)),
                ('total_diferencias', models.IntegerField(default=0)),
                ('valor_diferencias', models.DecimalField(decimal_places=2, default=0.0, max_digits=12)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'conteo_fisico',
                'ordering': ['-fecha_programada'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ConteoFisicoDetalle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad_sistema', models.IntegerField(help_text='Stock según sistema')),
                ('cantidad_contada', models.IntegerField(blank=True, help_text='Stock según conteo físico', null=True)),
                ('diferencia', models.IntegerField(blank=True, help_text='cantidad_contada - cantidad_sistema', null=True)),
                ('costo_unitario', models.DecimalField(decimal_places=2, max_digits=12)),
                ('valor_diferencia', models.DecimalField(decimal_places=2, default=0.0, max_digits=12)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('contado', 'Contado'), ('verificado', 'Verificado'), ('ajustado', 'Ajustado')], default='pendiente', max_length=20)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('fecha_conteo', models.DateTimeField(blank=True, null=True)),
                ('fecha_verificacion', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'db_table': 'conteo_fisico_detalle',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='CostoHistorico',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('costo_anterior', models.DecimalField(decimal_places=2, max_digits=12)),
                ('costo_nuevo', models.DecimalField(decimal_places=2, max_digits=12)),
                ('diferencia', models.DecimalField(decimal_places=2, max_digits=12)),
                ('porcentaje_cambio', models.DecimalField(decimal_places=2, max_digits=5)),
                ('motivo', models.CharField(choices=[('reabastecimiento', 'Reabastecimiento'), ('ajuste_manual', 'Ajuste Manual'), ('inflacion', 'Inflación'), ('proveedor', 'Cambio de Proveedor'), ('otro', 'Otro')], max_length=20)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('fecha_cambio', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'costo_historico',
                'ordering': ['-fecha_cambio'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='DescarteProducto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad', models.IntegerField()),
                ('motivo', models.CharField(choices=[('vencido', 'Vencido'), ('proximo_vencer', 'Próximo a Vencer'), ('dañado', 'Dañado'), ('contaminado', 'Contaminado'), ('empaque_roto', 'Empaque Roto'), ('calidad_baja', 'Calidad Baja'), ('otro', 'Otro')], max_length=20)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('costo_unitario', models.DecimalField(decimal_places=2, max_digits=12)),
                ('costo_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('fecha_descarte', models.DateTimeField(auto_now_add=True)),
                ('estado', models.CharField(choices=[('pendiente', 'Pendiente'), ('aprobado', 'Aprobado'), ('rechazado', 'Rechazado'), ('ejecutado', 'Ejecutado')], default='pendiente', max_length=20)),
                ('evidencia_url', models.CharField(blank=True, help_text='Foto del producto descartado', max_length=255, null=True)),
            ],
            options={
                'db_table': 'descarte_producto',
                'ordering': ['-fecha_descarte'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='DevolucionProveedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('fecha_devolucion', models.DateTimeField(auto_now_add=True)),
                ('motivo', models.CharField(choices=[('producto_defectuoso', 'Producto Defectuoso'), ('producto_vencido', 'Producto Vencido'), ('cantidad_incorrecta', 'Cantidad Incorrecta'), ('producto_incorrecto', 'Producto Incorrecto'), ('empaque_dañado', 'Empaque Dañado'), ('otro', 'Otro')], max_length=30)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('costo_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('estado', models.CharField(choices=[('solicitada', 'Solicitada'), ('aprobada', 'Aprobada'), ('rechazada', 'Rechazada'), ('completada', 'Completada')], default='solicitada', max_length=20)),
                ('fecha_aprobacion', models.DateTimeField(blank=True, null=True)),
                ('numero_guia', models.CharField(blank=True, help_text='Número de guía de devolución', max_length=100, null=True)),
            ],
            options={
                'db_table': 'devolucion_proveedor',
                'ordering': ['-fecha_devolucion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='DevolucionProveedorDetalle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad', models.IntegerField()),
                ('costo_unitario', models.DecimalField(decimal_places=2, max_digits=12)),
                ('motivo_especifico', models.TextField(blank=True, null=True)),
            ],
            options={
                'db_table': 'devolucion_proveedor_detalle',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='MermaEsperada',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('porcentaje_merma', models.DecimalField(decimal_places=2, help_text='Porcentaje esperado de merma', max_digits=5)),
                ('motivo_principal', models.CharField(blank=True, max_length=255, null=True)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('fecha_vigencia_desde', models.DateField()),
                ('fecha_vigencia_hasta', models.DateField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'merma_esperada',
                'ordering': ['categoria__nombre'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ReservaInventario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad', models.IntegerField()),
                ('tipo_reserva', models.CharField(choices=[('venta', 'Venta'), ('pedido', 'Pedido'), ('transferencia', 'Transferencia'), ('otro', 'Otro')], default='venta', max_length=20)),
                ('referencia_id', models.IntegerField(blank=True, help_text='ID de venta, pedido, etc.', null=True)),
                ('referencia_tipo', models.CharField(blank=True, help_text='Tipo de referencia', max_length=50, null=True)),
                ('fecha_reserva', models.DateTimeField(auto_now_add=True)),
                ('fecha_expiracion', models.DateTimeField(blank=True, help_text='Cuándo expira la reserva', null=True)),
                ('estado', models.CharField(choices=[('activa', 'Activa'), ('liberada', 'Liberada'), ('consumida', 'Consumida'), ('expirada', 'Expirada')], default='activa', max_length=20)),
                ('fecha_liberacion', models.DateTimeField(blank=True, null=True)),
                ('motivo_liberacion', models.TextField(blank=True, null=True)),
            ],
            options={
                'db_table': 'reserva_inventario',
                'ordering': ['-fecha_reserva'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='RotacionInventario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('periodo', models.CharField(help_text='Formato: YYYY-MM', max_length=7)),
                ('stock_inicial', models.IntegerField()),
                ('stock_final', models.IntegerField()),
                ('stock_promedio', models.DecimalField(decimal_places=2, max_digits=12)),
                ('cantidad_vendida', models.IntegerField()),
                ('costo_mercancia_vendida', models.DecimalField(decimal_places=2, max_digits=12)),
                ('rotacion', models.DecimalField(decimal_places=2, help_text='Veces que rota el inventario', max_digits=10)),
                ('dias_inventario', models.DecimalField(decimal_places=2, help_text='Días promedio en inventario', max_digits=10)),
                ('clasificacion_abc', models.CharField(blank=True, choices=[('A', 'A - Alta Rotación'), ('B', 'B - Rotación Media'), ('C', 'C - Baja Rotación')], max_length=1, null=True)),
                ('fecha_calculo', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'rotacion_inventario',
                'ordering': ['-periodo', 'producto__nombre'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TransferenciaInventario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('numero_transferencia', models.CharField(help_text='Ej: TRF-2025-001', max_length=50, unique=True)),
                ('fecha_solicitud', models.DateTimeField(auto_now_add=True)),
                ('fecha_envio', models.DateTimeField(blank=True, null=True)),
                ('fecha_recepcion', models.DateTimeField(blank=True, null=True)),
                ('estado', models.CharField(choices=[('solicitada', 'Solicitada'), ('aprobada', 'Aprobada'), ('en_transito', 'En Tránsito'), ('recibida', 'Recibida'), ('cancelada', 'Cancelada')], default='solicitada', max_length=20)),
                ('motivo', models.CharField(choices=[('reubicacion', 'Reubicación'), ('reabastecimiento_interno', 'Reabastecimiento Interno'), ('optimizacion', 'Optimización'), ('otro', 'Otro')], max_length=30)),
                ('descripcion', models.TextField(blank=True, null=True)),
                ('observaciones', models.TextField(blank=True, null=True)),
            ],
            options={
                'db_table': 'transferencia_inventario',
                'ordering': ['-fecha_solicitud'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TransferenciaInventarioDetalle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cantidad_solicitada', models.IntegerField()),
                ('cantidad_enviada', models.IntegerField(blank=True, null=True)),
                ('cantidad_recibida', models.IntegerField(blank=True, null=True)),
                ('costo_unitario', models.DecimalField(decimal_places=2, max_digits=12)),
                ('observaciones', models.TextField(blank=True, null=True)),
            ],
            options={
                'db_table': 'transferencia_inventario_detalle',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='UbicacionFisica',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(help_text='Ej: BOD-A-EST-3-NIV-2', max_length=20, unique=True)),
                ('nombre', models.CharField(max_length=100)),
                ('tipo', models.CharField(choices=[('bodega', 'Bodega'), ('pasillo', 'Pasillo'), ('estante', 'Estante'), ('nivel', 'Nivel'), ('zona', 'Zona')], default='estante', max_length=20)),
                ('capacidad_maxima', models.IntegerField(blank=True, help_text='Capacidad en unidades', null=True)),
                ('capacidad_actual', models.IntegerField(default=0, help_text='Ocupación actual')),
                ('temperatura_min', models.DecimalField(blank=True, decimal_places=2, help_text='Temperatura mínima (°C)', max_digits=5, null=True)),
                ('temperatura_max', models.DecimalField(blank=True, decimal_places=2, help_text='Temperatura máxima (°C)', max_digits=5, null=True)),
                ('requiere_refrigeracion', models.BooleanField(default=False)),
                ('activo', models.BooleanField(default=True)),
                ('observaciones', models.TextField(blank=True, null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Ubicación Física',
                'verbose_name_plural': 'Ubicaciones Físicas',
                'db_table': 'ubicacion_fisica',
                'ordering': ['codigo'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ValorizacionInventario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('periodo', models.CharField(help_text='Formato: YYYY-MM', max_length=7)),
                ('fecha_corte', models.DateField()),
                ('cantidad', models.IntegerField()),
                ('costo_unitario', models.DecimalField(decimal_places=2, max_digits=12)),
                ('costo_promedio', models.DecimalField(decimal_places=2, max_digits=12)),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=12)),
                ('fecha_generacion', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'db_table': 'valorizacion_inventario',
                'ordering': ['-periodo', 'producto__nombre'],
                'managed': False,
            },
        ),
        migrations.AlterModelOptions(
            name='categoria',
            options={'managed': False, 'ordering': ['orden', 'nombre']},
        ),
        migrations.AlterModelOptions(
            name='lote',
            options={'managed': False, 'ordering': ['fecha_caducidad']},
        ),
        migrations.AlterModelOptions(
            name='movimientoinventario',
            options={'managed': False, 'ordering': ['-fecha_movimiento']},
        ),
        migrations.AlterModelOptions(
            name='producto',
            options={'managed': False, 'ordering': ['nombre']},
        ),
    ]
